<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width, initial-scale=1.0" name=viewport><meta content="Harminder Singh Nijjar" name=author><link href=https://harminder.dev/projects/social_media_automation/truth_social/account_cloning/downloading_media/downloading_media/ rel=canonical><link href=../../../../../../img/favicon.ico rel="shortcut icon"><title>Downloading media - Harminder Singh Nijjar</title><link href=../../../../../../css/bootstrap.min.css rel=stylesheet><link href=../../../../../../css/font-awesome.min.css rel=stylesheet><link href=../../../../../../css/base.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css rel=stylesheet><link href=../../../../../../assets/_mkdocstrings.css rel=stylesheet><link href=../../../../../../css/tailwind.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/flowbite@1.0.0/dist/flowbite.min.css rel=stylesheet><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><link href=../../../../../../css/custom.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script><script>hljs.highlightAll();</script><meta content="Downloading media" name=title><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css rel=stylesheet><meta content=website property=og:type><meta content=https://harminder.dev/projects/social_media_automation/truth_social/account_cloning/downloading_media/downloading_media property=og:url><meta content="Downloading media" property=og:title><meta content="Learn how to download all media from a specific Instagram profile along with captions and hashtags, then store this data in a SQLite database." property=og:description><meta content=../chrome_sv2FM6ThyT.png property=og:image><meta content=summary_large_image property=twitter:card><meta content=https://harminder.dev/projects/social_media_automation/truth_social/account_cloning/downloading_media/downloading_media property=twitter:url><meta content="Downloading media" property=twitter:title><meta content="Learn how to download all media from a specific Instagram profile along with captions and hashtags, then store this data in a SQLite database." property=twitter:description><meta content=../chrome_sv2FM6ThyT.png property=twitter:image></head> <body> <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary"> <div class=container> <a class=navbar-brand href=../../../../../..>Harminder Singh Nijjar</a> <!-- Expander button --> <button class=navbar-toggler data-target=#navbar-collapse data-toggle=collapse type=button> <span class=navbar-toggler-icon></span> </button> <!-- Expanded navigation --> <div class="navbar-collapse collapse" id=navbar-collapse> <!-- Main navigation --> <ul class="nav navbar-nav"> <li class=navitem> <a class=nav-link href=../../../../../..>Home</a> </li> <li class="dropdown active"> <a class="nav-link dropdown-toggle" data-toggle=dropdown href=#>Projects <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../../../ class=dropdown-item>Current projects</a> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>AI-Powered Property Surveillance</a> <ul class=dropdown-menu> <li> <a href=../../../../../ai_powered_property_surveillance/training/ class=dropdown-item>Training YOLOV8 on DVR footage</a> </li> </ul> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Dubbing pipeline</a> <ul class=dropdown-menu> <li> <a href=../../../../../dubbing_pipeline/dub_with_elevenlabs/ class=dropdown-item>Dub with ElevenLabs Google Chrome Extension</a> </li> </ul> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Midjourney Automation Bot</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Wiki</a> <ul class=dropdown-menu> <li> <a href=../../../../../midjourney_automation_bot/wiki/midjourney_automation_bot_overview/ class=dropdown-item>Midjourney Automation Bot</a> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Features</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Requested features</a> <ul class=dropdown-menu> <li> <a href=../../../../../midjourney_automation_bot/wiki/features/requested_features/automated_instagram_image_uploading_with_advanced_captioning/ class=dropdown-item>Automated Instagram image uploading with advanced captioning</a> </li> <li> <a href=../../../../../midjourney_automation_bot/wiki/features/requested_features/improved_documentation/ class=dropdown-item>Improved Documentation</a> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>RunescapeGPT</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Wiki</a> <ul class=dropdown-menu> <li> <a href=../../../../../runescapegpt/wiki/runescapegpt_overview/ class=dropdown-item>RunescapeGPT</a> </li> </ul> </li> </ul> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Social media automation</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Instagram</a> <ul class=dropdown-menu> <li> <a href=../../../../instagram/Unfollowing%20non_followers/unfollowing_non_followers/ class=dropdown-item>Unfollowing non-followers</a> </li> </ul> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Truth Social</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Account cloning</a> <ul class=dropdown-menu> <li> <a href=./ class="dropdown-item active">Downloading media</a> </li> </ul> </li> </ul> </li> </ul> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Web scraping</a> <ul class=dropdown-menu> <li> <a href=../../../../../web_scraping/web_scraping_overview/ class=dropdown-item>Web scraping overview</a> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Facebook</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Facebook Marketplace</a> <ul class=dropdown-menu> <li> <a href=../../../../../web_scraping/facebook/facebook_marketplace/bright_data_facebook_marketplace_scraper/ class=dropdown-item>Bright Data Facebook Marketplace Scraper</a> </li> <li> <a href=../../../../../web_scraping/facebook/facebook_marketplace/oxylabs_facebook_marketplace_scraper/ class=dropdown-item>Oxylabs Facebook Marketplace Scraper</a> </li> <li> <a href=../../../../../web_scraping/facebook/facebook_marketplace/smartproxy_facebook_marketplace_scraper/ class=dropdown-item>Smartproxy Facebook Marketplace Scraper</a> </li> </ul> </li> </ul> </li> </ul> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Websites</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Vercel</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>GitBute</a> <ul class=dropdown-menu> <li> <a href=../../../../../websites/vercel/gitbute/3d_github_contributions/3d_github_contributions/ class=dropdown-item>3D GitHub Contributions</a> </li> </ul> </li> </ul> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>MkDocs</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Adding Assets</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Additional CSS</a> <ul class=dropdown-menu> <li> <a href=../../../../../websites/mkdocs/knowledge_base/adding_assets/additional_css/tailwind_css/setup_material_mkdocs_insiders_tailwind/ class=dropdown-item>Tailwind CSS</a> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li class=dropdown> <a class="nav-link dropdown-toggle" data-toggle=dropdown href=#>Areas <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../../../../areas/ class=dropdown-item>Areas of Interest</a> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Culture and Arts</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Recreation and entertainment</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Games</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Sports</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Combat sports</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Material arts</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Brazilian Jiu-Jitsu</a> <ul class=dropdown-menu> <li> <a class=dropdown-item href=../../../../../../areas/culture_and_arts/recreation_and_entertainment/games/sports/combat_sports/material_arts/brazilian_jiu_jitsu.md>Overview</a> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Video games</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Video game hardware platforms</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Cloud gaming</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Amazon Luna</a> <ul class=dropdown-menu> <li> <a class=dropdown-item href=../../../../../../areas/culture_and_arts/recreation_and_entertainment/games/video_games/video_game_hardware_platforms/cloud_gaming/amazon_luna.md>Amazon Luna</a> </li> </ul> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Netflix Gaming</a> <ul class=dropdown-menu> <li> <a class=dropdown-item href=../../../../../../areas/culture_and_arts/recreation_and_entertainment/games/video_games/video_game_hardware_platforms/cloud_gaming/netflix_gaming.md>Netflix Gaming</a> </li> </ul> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Xbox Cloud Gaming</a> <ul class=dropdown-menu> <li> <a class=dropdown-item href=../../../../../../areas/culture_and_arts/recreation_and_entertainment/games/video_games/video_game_hardware_platforms/cloud-gaming/xbox_cloud_gaming.md>Xbox Cloud Gaming</a> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li class=dropdown-submenu> <a class=dropdown-item href=#>Music</a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a class=dropdown-item href=#>Lofi</a> <ul class=dropdown-menu> <li> <a class=dropdown-item href=../../../../../../areas/culture_and_the_arts/recreation_and_entertainment/music/lofi/top_100_lofi_songs.md>Top 100</a> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li class=dropdown> <a class="nav-link dropdown-toggle" data-toggle=dropdown href=#>Blog <b class=caret></b></a> <ul class=dropdown-menu> <li> <a href=../../../../../../blog/ class=dropdown-item>Blog</a> </li> </ul> </li> </ul> <ul class="nav navbar-nav ml-auto"> <li class=nav-item> <a class=nav-link data-target=#mkdocs_search_modal data-toggle=modal href=#> <i class="fa fa-search"></i> Search </a> </li> <li class=nav-item> <a class=nav-link href=../../../../instagram/Unfollowing%20non_followers/unfollowing_non_followers/ rel=prev> <i class="fa fa-arrow-left"></i> Previous </a> </li> <li class=nav-item> <a class=nav-link href=../../../../../web_scraping/web_scraping_overview/ rel=next> Next <i class="fa fa-arrow-right"></i> </a> </li> </ul> </div> </div> </div> <div class=container> <div class=row> <div class=col-md-3><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role=complementary> <div class=navbar-header> <button class="navbar-toggler collapsed" data-target=#toc-collapse data-toggle=collapse title="Table of Contents" type=button> <span class="fa fa-angle-down"></span> </button> </div> <div class="navbar-collapse collapse card bg-secondary" id=toc-collapse> <ul class="nav flex-column"> <li class=nav-item data-level=1><a class=nav-link href=#downloading-media>Downloading Media</a> <ul class="nav flex-column"> <li class=nav-item data-level=2><a class=nav-link href=#introduction>Introduction</a> <ul class="nav flex-column"> </ul> </li> <li class=nav-item data-level=2><a class=nav-link href=#choosing-a-platform>Choosing a Platform</a> <ul class="nav flex-column"> </ul> </li> <li class=nav-item data-level=2><a class=nav-link href=#selecting-a-profile-to-replicate>Selecting a Profile to Replicate</a> <ul class="nav flex-column"> </ul> </li> <li class=nav-item data-level=2><a class=nav-link href=#creating-a-sqlite-database>Creating a SQLite Database</a> <ul class="nav flex-column"> </ul> </li> <li class=nav-item data-level=2><a class=nav-link href=#replicating-an-instagram-profile-with-instagrapi>Replicating an Instagram Profile with Instagrapi</a> <ul class="nav flex-column"> </ul> </li> <li class=nav-item data-level=2><a class=nav-link href=#conclusion>Conclusion</a> <ul class="nav flex-column"> </ul> </li> </ul> </li> </ul> </div> </div></div> <div class=col-md-9 role=main> <div><h1 id=downloading-media>Downloading Media</h1> <h2 id=introduction>Introduction</h2> <p>In this tutorial, we will be covering how to download all media from a specific Instagram profile along with captions and hashtags, then store this data in a SQLite database. This will allow us to store the data we scrape from Instagram to later be uploaded to Truth Social. We will be using the following tools:</p> <ul> <li><a href=https://subzeroid.github.io/instagrapi/ >Instagrapi</a></li> <li><a href=https://docs.python.org/3/library/sqlite3.html>SQLite</a></li> </ul> <h3 id=project-description>Project Description</h3> <p>Due to the recent actions of mainstream technology giants against figures like Alex Jones and then-President Donald Trump, alternative digital ecosystems have grown in popularity. Platforms like Truth Social endorse unrestricted speech, attracting users looking for alternatives to the mainstream. By utilizing tools like Instagrapi and SQLite, we can store the data we scrape from Instagram to later be uploaded to Truth Social. </p> <h4 id=project-objectives>Project Objectives</h4> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input checked disabled type=checkbox><span class=task-list-indicator></span></label> Download, at minimum, 100 media from a specific Instagram profile along with captions and hashtags, then store this data in a SQLite database.</li> </ul> <h4 id=deadline>Deadline</h4> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input checked disabled type=checkbox><span class=task-list-indicator></span></label> Achieve the project goals by 2023-10-13.</li> </ul> <h2 id=choosing-a-platform>Choosing a Platform</h2> <h3 id=truth-social>Truth Social</h3> <script src=https://ssl.gstatic.com/trends_nrtr/3461_RC01/embed_loader.js type=text/javascript></script> <script type=text/javascript> trends.embed.renderExploreWidget("TIMESERIES", {"comparisonItem":[{"keyword":"Truth Social","geo":"US","time":"today 12-m"},{"keyword":"Parler","geo":"US","time":"today 12-m"},{"keyword":"Gettr","geo":"US","time":"today 12-m"},{"keyword":"Gab","geo":"US","time":"today 12-m"}],"category":0,"property":""}, {"exploreQuery":"geo=US&q=Truth%20Social,Parler,Gettr,Gab&hl=en&date=today 12-m,today 12-m,today 12-m,today 12-m","guestPath":"https://trends.google.com:443/trends/embed/"}); </script> <script src=https://ssl.gstatic.com/trends_nrtr/3461_RC01/embed_loader.js type=text/javascript></script> <p>Based on the Google Trends data, Truth Social currently leads in popularity among alternative platforms. This indicates a potentially large user base, making it the ideal choice for profile replication.</p> <h2 id=selecting-a-profile-to-replicate>Selecting a Profile to Replicate</h2> <h3 id=nicole-wolf>Nicole Wolf</h3> <p>Our initial step involves the careful selection of a profile to replicate. In the context of this tutorial, we have chosen to replicate the profile of a well-known Instagram influencer, Nicole Wolf, a professional web developer and dancer, known as <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/joeel56 title="GitHub User: joeel56">@joeel56</a>. With over 176,000 followers and a public profile, Nicole's online presence is significant. Given that her German background aligns with the demographics of Truth Social, this profile is ideal for replication.</p> <p><img alt=@Joeel56 src=../chrome_sv2FM6ThyT.png></p> <h2 id=creating-a-sqlite-database>Creating a SQLite Database</h2> <h3 id=installation>Installation</h3> <p>SQLite is a relational database management system that is embedded into the Python programming language. This database management system is well-documented and can be accessed <a href=https://docs.python.org/3/library/sqlite3.html target=_blank>here</a>. We will be using this database management system to store the data we scrape from Instagram. The following sections will outline the steps required to create a SQLite database.</p> <p>Install the "sqlite3" library if you haven't already. You can install it using pip:</p> <div class=highlight><pre><span></span><code><span class=n>pip</span> <span class=n>install</span> <span class=n>sqlite3</span>
</code></pre></div> <h3 id=database-initialization>Database Initialization</h3> <p>After installing the "sqlite3" library, we will need to create a SQLite database. This database will store the data we scrape from Instagram. To create a SQLite database, we will need to import the <code>sqlite3</code> library. We will then need to initialize a connection to this database. This will create a SQLite database that we can use to store the data we scrape from Instagram.</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>sqlite3</span>

<span class=c1># Create a connection to the SQLite database</span>
<span class=n>conn</span> <span class=o>=</span> <span class=n>sqlite3</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=s2>"instagram_data.db"</span><span class=p>)</span>
</code></pre></div> <h3 id=creating-a-table-for-media-data>Creating a Table for Media Data</h3> <p>After creating a SQLite database, we will need to create a table in this database. This table will store the data we scrape from Instagram. To create a table in a SQLite database, we will need to create a cursor object. We will then need to execute a SQL query to create a table in our SQLite database. This will create a table in our SQLite database that we can use to store the data we scrape from Instagram.</p> <div class=highlight><pre><span></span><code><span class=c1># Define cursor</span>

<span class=n>cursor</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>cursor</span><span class=p>()</span>

<span class=c1># Establish a table structure</span>

<span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s1>'''</span>
<span class=s1>CREATE TABLE IF NOT EXISTS media_data (</span>
<span class=s1>id INTEGER PRIMARY KEY,</span>
<span class=s1>media BLOB NOT NULL,</span>
<span class=s1>caption TEXT,</span>
<span class=s1>hashtags TEXT</span>
<span class=s1>)</span>
<span class=s1>'''</span><span class=p>)</span>

<span class=c1># Commit changes and close connection</span>

<span class=n>conn</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
<span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</code></pre></div> <h2 id=replicating-an-instagram-profile-with-instagrapi>Replicating an Instagram Profile with Instagrapi</h2> <h3 id=instagrapi-installation>Instagrapi Installation</h3> <p>Instagrapi is a Python library that can be used to programmatically interact with Instagram. This library is well-documented and can be accessed <a href=https://subzeroid.github.io/instagrapi/ target=_blank>here</a> . We will be using this library to replicate our Instagram profile. The following sections will outline the steps required to replicate our Instagram profile.</p> <p>Install the "instagrapi" library if you haven't already. You can install it using pip:</p> <div class=highlight><pre><span></span><code><span class=n>pip</span> <span class=n>install</span> <span class=n>instagrapi</span>
</code></pre></div> <h3 id=creating-an-instagram-session>Creating an Instagram Session</h3> <p>To download all media from a specific Instagram profile along with captions and hashtags, then store this data in a Notion database, we will first need to create an Instagram session. This session will allow us to programmatically interact with Instagram. To create an Instagram session, we will need to import the <code>Client</code> class from the <code>instagrapi</code> library. We will then need to create an instance of this class and pass in our Instagram username and password. This will create an Instagram session that we can use to programmatically interact with Instagram.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>instagrapi</span> <span class=kn>import</span> <span class=n>Client</span>

<span class=c1># Initialize the client</span>
<span class=n>client</span> <span class=o>=</span> <span class=n>Client</span><span class=p>()</span>
</code></pre></div> <h3 id=authenticating-an-instagram-session>Authenticating an Instagram Session</h3> <p>After creating an Instagram session, we will need to authenticate this session. This will allow us to programmatically interact with Instagram. To authenticate an Instagram session, we will need to call the <code>login</code> method on our Instagram session and pass in our Instagram username and password. This will authenticate our Instagram session and allow us to programmatically interact with Instagram.</p> <div class=highlight><pre><span></span><code><span class=c1># Authenticate the client</span>
<span class=n>client</span><span class=o>.</span><span class=n>login</span><span class=p>(</span><span class=s2>"username"</span><span class=p>,</span> <span class=s2>"password"</span><span class=p>)</span>
</code></pre></div> <h3 id=downloading-media-from-an-instagram-profile>Downloading Media from an Instagram Profile</h3> <p>After downloading all media from a specific Instagram profile, we will need to store this data in a SQLite database. This will allow us to store the data we scrape from Instagram. To store this data in a SQLite database, we will need to create a connection to our SQLite database. We will then need to create a cursor object. We will then need to execute a SQL query to insert this data into our SQLite database. This will store this data in our SQLite database and allow us to store the data we scrape from Instagram.</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>download_media_from_profile</span><span class=p>(</span><span class=n>username</span><span class=p>,</span> <span class=n>max_count</span><span class=o>=</span><span class=mi>100</span><span class=p>):</span>
    <span class=n>user_info</span> <span class=o>=</span> <span class=n>cl</span><span class=o>.</span><span class=n>user_info_by_username</span><span class=p>(</span><span class=n>username</span><span class=p>)</span>
    <span class=n>user_id</span> <span class=o>=</span> <span class=n>user_info</span><span class=o>.</span><span class=n>pk</span>
    <span class=c1># Get the user's media</span>
    <span class=n>medias</span> <span class=o>=</span> <span class=n>cl</span><span class=o>.</span><span class=n>user_medias</span><span class=p>(</span><span class=n>user_id</span><span class=p>,</span> <span class=n>amount</span><span class=o>=</span><span class=n>max_count</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>media</span> <span class=ow>in</span> <span class=n>medias</span><span class=p>:</span>
        <span class=n>media_id</span> <span class=o>=</span> <span class=n>media</span><span class=o>.</span><span class=n>pk</span>
        <span class=n>caption</span> <span class=o>=</span> <span class=n>media</span><span class=o>.</span><span class=n>caption_text</span>  <span class=c1># Get the caption</span>
        <span class=n>hashtags</span> <span class=o>=</span> <span class=p>[</span><span class=n>tag</span><span class=o>.</span><span class=n>strip</span><span class=p>(</span><span class=s2>"#"</span><span class=p>)</span> <span class=k>for</span> <span class=n>tag</span> <span class=ow>in</span> <span class=n>caption</span><span class=o>.</span><span class=n>split</span><span class=p>()</span> <span class=k>if</span> <span class=n>tag</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>"#"</span><span class=p>)]</span>  <span class=c1># Extract hashtags</span>
        <span class=n>hashtags</span> <span class=o>=</span> <span class=s2>", "</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>hashtags</span><span class=p>)</span>  <span class=c1># Convert hashtags to a string</span>
        <span class=c1># Initialize media_blob as None to handle unexpected media types</span>
        <span class=n>media_blob</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=c1># Download the media (photo or video) and convert it to binary</span>
        <span class=k>if</span> <span class=n>media</span><span class=o>.</span><span class=n>media_type</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>  <span class=c1># Photo</span>
            <span class=n>path</span> <span class=o>=</span> <span class=n>cl</span><span class=o>.</span><span class=n>photo_download</span><span class=p>(</span><span class=n>media_id</span><span class=p>,</span> <span class=n>folder</span><span class=o>=</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
            <span class=n>media_blob</span> <span class=o>=</span> <span class=n>convert_to_binary</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
        <span class=k>elif</span> <span class=n>media</span><span class=o>.</span><span class=n>media_type</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>  <span class=c1># Video</span>
            <span class=n>path</span> <span class=o>=</span> <span class=n>cl</span><span class=o>.</span><span class=n>video_download</span><span class=p>(</span><span class=n>media_id</span><span class=p>,</span> <span class=n>folder</span><span class=o>=</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
            <span class=n>media_blob</span> <span class=o>=</span> <span class=n>convert_to_binary</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
        <span class=c1># Check if the media_blob is already in the database</span>
        <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>"SELECT id FROM media_data WHERE media = ?"</span><span class=p>,</span> <span class=p>(</span><span class=n>media_blob</span><span class=p>,))</span>
        <span class=n>existing_media</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()</span>
        <span class=c1># If the media doesn't exist in the database, insert it</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>existing_media</span> <span class=ow>and</span> <span class=n>media_blob</span><span class=p>:</span>
            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>"INSERT INTO media_data (media, caption, hashtags) VALUES (?, ?, ?)"</span><span class=p>,</span> <span class=p>(</span><span class=n>media_blob</span><span class=p>,</span> <span class=n>caption</span><span class=p>,</span> <span class=n>hashtags</span><span class=p>))</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
            <span class=c1># Optionally, remove the downloaded file to save space</span>
            <span class=n>os</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Downloaded media with caption: </span><span class=si>{</span><span class=n>caption</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Hashtags: </span><span class=si>{</span><span class=n>hashtags</span><span class=si>}</span><span class=se>\n</span><span class=s2>"</span><span class=p>)</span>
        <span class=k>elif</span> <span class=n>existing_media</span><span class=p>:</span>
            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Media already exists in the database. Skipping download for media with caption: </span><span class=si>{</span><span class=n>caption</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</code></pre></div> <h3 id=closing-an-instagram-session>Closing an Instagram Session</h3> <p>After downloading all media from a specific Instagram profile, we will need to close this Instagram session. This will allow us to store the data we scrape from Instagram. To close an Instagram session, we will need to call the <code>logout</code> method on our Instagram session. This will close our Instagram session and allow us to store the data we scrape from Instagram.</p> <div class=highlight><pre><span></span><code><span class=c1># Close the client</span>
<span class=n>client</span><span class=o>.</span><span class=n>logout</span><span class=p>()</span>
</code></pre></div> <h2 id=conclusion>Conclusion</h2> <p><img alt src=../chrome_esWANpqp9C.png></p> <p>By following the above steps, one can efficiently download all media from a specific Instagram profile along with captions and hashtags, then store this data in a SQLite database. This will allow one to store the data we scrape from Instagram to later be uploaded to Truth Social. </p></div></div> </div> </div> <footer class=col-md-12> <hr> <p>Copyright © 2023 Harminder Singh Nijjar</p> <p>Documentation built with <a href=https://www.mkdocs.org/ >MkDocs</a>.</p> </footer> <script src=../../../../../../js/jquery-3.6.0.min.js></script> <script src=../../../../../../js/bootstrap.min.js></script> <script>
            var base_url = "../../../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script> <script src=../../../../../../js/base.js></script> <script src=https://cdn.jsdelivr.net/npm/apexcharts></script> <script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4024063910372726"></script> <script src=../../../../../../search/main.js></script> <div aria-hidden=true aria-labelledby=searchModalLabel class=modal id=mkdocs_search_modal role=dialog tabindex=-1> <div class="modal-dialog modal-lg"> <div class=modal-content> <div class=modal-header> <h4 class=modal-title id=searchModalLabel>Search</h4> <button class=close data-dismiss=modal type=button><span aria-hidden=true>×</span><span class=sr-only>Close</span></button> </div> <div class=modal-body> <p>From here you can search these documents. Enter your search terms below.</p> <form> <div class=form-group> <input class=form-control id=mkdocs-search-query placeholder=Search... title="Type search term here" type=search> </div> </form> <div data-no-results-text="No results found" id=mkdocs-search-results></div> </div> <div class=modal-footer> </div> </div> </div> </div><div aria-hidden=true aria-labelledby=keyboardModalLabel class=modal id=mkdocs_keyboard_modal role=dialog tabindex=-1> <div class=modal-dialog> <div class=modal-content> <div class=modal-header> <h4 class=modal-title id=keyboardModalLabel>Keyboard Shortcuts</h4> <button class=close data-dismiss=modal type=button><span aria-hidden=true>×</span><span class=sr-only>Close</span></button> </div> <div class=modal-body> <table class=table> <thead> <tr> <th style="width: 20%;">Keys</th> <th>Action</th> </tr> </thead> <tbody> <tr> <td class="help shortcut"><kbd>?</kbd></td> <td>Open this help</td> </tr> <tr> <td class="next shortcut"><kbd>n</kbd></td> <td>Next page</td> </tr> <tr> <td class="prev shortcut"><kbd>p</kbd></td> <td>Previous page</td> </tr> <tr> <td class="search shortcut"><kbd>s</kbd></td> <td>Search</td> </tr> </tbody> </table> </div> <div class=modal-footer> </div> </div> </div> </div> </body> </html> 